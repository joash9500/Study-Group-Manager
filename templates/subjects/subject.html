{% extends 'base.html' %}

{% block title %} {{subject}} {% endblock %}

{% block section %}

    <h1>Groups for {{subject}} </h1>

    {% if name == 'admin' %}

        <h3>hello {{name}}, what changes would you like to make today?</h3>

        <form action="/subject_action", method="POST">
            Add new group: <input type="text" name="add_group">
            Delete group: <input type="text" name="delete_group">
            <!-- submit the subject name as a parameter to update the database with groups we add or delete -->
            <input type="hidden" name="subject" value="{{subject}}">
            <input type="submit" value="Update"> 
        </form>

    {% elif name %}    

    <h3>hello {{name}}, what groups do you want to join?</h3>

    {% endif %}

    {% if name %}
        {% for group in joined_list %}

            <a href="/groups/{{ group[0] }}"><li>{{ group[0] }}</li></a>

        {% endfor %}

        <!-- add a join button for groups that user has not joined yet -->
        {% for group in not_joined_list %}

            <li>{{ group[0] }}</li>
   
            <form action="/group_join", method="POST">
                <input type="submit" name="join" value="join">
                <input type="hidden" name="groupname" value="{{ group[0] }}">
            </form>

        {% endfor %}

    {% else %}

        <h3>You can't see groups yet. Please sign in or sign up <a href="{{url_for('signup')}}">here</a></h3>

    {% endif %}

{% endblock %}